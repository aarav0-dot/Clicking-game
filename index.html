<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AARAV ¬∑ ULTIMATE CLICKER üèÜ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            transition: background 0.2s ease;
            will-change: background;
        }

        /* LIGHT MODE */
        body.light {
            background: radial-gradient(circle at center, #f0f9ff, #e0f2fe);
            color: #0f172a;
        }

        body.light .game-container {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        /* DARK MODE (DEFAULT) */
        body.dark {
            background: radial-gradient(circle at center, #0f172a, #020617);
            color: white;
        }

        body.dark .game-container {
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(255, 65, 108, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }

        .game-container {
            max-width: 600px;
            width: 100%;
            padding: 2rem 1.5rem;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 60px;
            text-align: center;
            transition: all 0.2s;
            transform: translateZ(0);
            will-change: transform;
        }

        .theme-toggle {
            position: fixed;
            top: 16px;
            right: 16px;
            font-size: 2rem;
            background: rgba(255, 255, 255, 0.15);
            border: none;
            cursor: pointer;
            padding: 12px;
            border-radius: 50%;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 3000;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.1s;
        }

        .theme-toggle:active {
            transform: scale(0.9);
        }

        h1 {
            font-size: clamp(2rem, 8vw, 3.2rem);
            background: linear-gradient(135deg, #fff, #ffd966);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
            line-height: 1.2;
        }

        .timer-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 50px;
            padding: 0.8rem 2rem;
            display: inline-block;
            margin: 1rem auto;
            border: 2px solid #ffd966;
        }

        #timer {
            font-size: clamp(2rem, 6vw, 2.5rem);
            font-weight: 800;
            color: #ffd966;
            transition: color 0.2s;
            font-variant-numeric: tabular-nums;
        }

        .timer-warning {
            color: #ff4444 !important;
            animation: pulse 0.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.8rem;
            margin: 1.5rem 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 40px;
            padding: 1rem 0.5rem;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.1s;
        }

        .stat-card.special {
            background: linear-gradient(145deg, #ffd700, #ffa500);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .stat-card.special .stat-value {
            color: white;
            background: none;
            -webkit-text-fill-color: white;
        }

        .stat-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.8;
        }

        .stat-value {
            font-size: clamp(1.8rem, 5vw, 2.2rem);
            font-weight: 800;
            background: linear-gradient(135deg, #fff, #a8d8ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-variant-numeric: tabular-nums;
        }

        .combo-container {
            margin: 1rem 0;
        }

        .combo-meter {
            width: 100%;
            height: 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        .combo-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff416c, #ff8c42, #ffd966);
            transition: width 0.1s linear;
            border-radius: 20px;
            will-change: width;
        }

        .powerups-container {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }

        .powerup {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #ff416c;
            border-radius: 30px;
            padding: 0.8rem 1.2rem;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.1s;
            opacity: 0.7;
            min-width: 100px;
            justify-content: center;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .powerup.active {
            opacity: 1;
            background: linear-gradient(145deg, #ff416c, #ff4b2b);
            border-color: white;
            transform: scale(1.02);
            box-shadow: 0 0 20px rgba(255, 75, 43, 0.5);
        }

        .powerup:active {
            transform: scale(0.95);
        }

        .powerup.disabled {
            opacity: 0.3;
            pointer-events: none;
            filter: grayscale(1);
        }

        .powerup-timer {
            font-size: 1rem;
            background: rgba(0, 0, 0, 0.5);
            padding: 2px 8px;
            border-radius: 20px;
            font-variant-numeric: tabular-nums;
        }

        .click-btn {
            font-size: clamp(1.8rem, 7vw, 2.2rem);
            padding: 1.2rem 2rem;
            width: 100%;
            max-width: 350px;
            border: none;
            border-radius: 120px;
            background: linear-gradient(145deg, #ff416c, #ff4b2b, #ff8c42);
            color: white;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(255, 65, 108, 0.3);
            transition: all 0.1s;
            margin: 1.5rem auto 1rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transform: translateZ(0);
            -webkit-tap-highlight-color: transparent;
        }

        .click-btn:active {
            transform: scale(0.95);
        }

        .click-btn.powered {
            box-shadow: 0 0 30px #ffd966, 0 10px 20px rgba(255, 65, 108, 0.3);
            animation: glow 1s infinite;
        }

        @keyframes glow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .share-section {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 1rem;
        }

        .share-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            padding: 12px;
            border-radius: 50%;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            transition: transform 0.1s;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .share-btn:active {
            transform: scale(0.9);
        }

        /* Optimized animations */
        .explosion {
            position: fixed;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1000;
            animation: explode 0.4s ease-out forwards;
            mix-blend-mode: screen;
            will-change: transform, opacity;
        }

        @keyframes explode {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(30); opacity: 0; }
        }

        .floating-text {
            position: fixed;
            color: #ffd966;
            font-size: 2rem;
            font-weight: bold;
            pointer-events: none;
            animation: floatUp 0.6s ease-out forwards;
            z-index: 1001;
            text-shadow: 0 0 10px orange;
            will-change: transform, opacity;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-80px) scale(1.2); opacity: 0; }
        }

        .game-over-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            padding: 2rem;
            border-radius: 70px;
            border: 3px solid #ff416c;
            box-shadow: 0 0 50px rgba(255, 65, 108, 0.5);
            z-index: 2000;
            text-align: center;
            animation: popIn 0.2s forwards;
            min-width: 300px;
            color: white;
        }

        @keyframes popIn {
            to { transform: translate(-50%, -50%) scale(1); }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            z-index: 1999;
            animation: fadeIn 0.2s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .restart-btn {
            background: linear-gradient(145deg, #ff416c, #ff4b2b);
            border: none;
            color: white;
            font-size: 1.5rem;
            padding: 1rem 2rem;
            border-radius: 50px;
            margin-top: 1rem;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            transition: transform 0.1s;
        }

        .restart-btn:active {
            transform: scale(0.95);
        }

        /* Performance optimizations */
        .game-container, .stat-card, .powerup, .click-btn {
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }
    </style>
</head>
<body class="dark">
    <button class="theme-toggle" id="themeToggle">üåô</button>

    <div class="game-container">
        <h1>AARAV'S ‚ö°<br>ULTIMATE CLICKER</h1>
        
        <div class="timer-card">
            <div id="timer">30</div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">SCORE</div>
                <div class="stat-value" id="score">0</div>
            </div>
            <div class="stat-card" id="comboCard">
                <div class="stat-label">COMBO</div>
                <div class="stat-value" id="combo">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">BEST</div>
                <div class="stat-value" id="highscore">0</div>
            </div>
        </div>

        <div class="combo-container">
            <div class="combo-meter">
                <div class="combo-fill" id="comboFill"></div>
            </div>
            <div id="maxCombo">üî• Max: 0</div>
        </div>

        <div class="powerups-container">
            <div class="powerup" id="doublePoints">
                <span>‚ö°</span> 2X <span class="powerup-timer" id="doubleTimer"></span>
            </div>
            <div class="powerup" id="timeBonus">
                <span>‚è∞</span> +3s <span class="powerup-timer" id="timeTimer"></span>
            </div>
            <div class="powerup" id="megaClick">
                <span>üí•</span> MEGA <span class="powerup-timer" id="megaTimer"></span>
            </div>
        </div>

        <button class="click-btn" id="clickBtn">
            <span>üî•</span> CLICK! <span>‚ö°</span>
        </button>

        <div class="share-section">
            <button class="share-btn" id="shareScore">üì§</button>
            <button class="share-btn" id="shareTwitter">üê¶</button>
            <button class="share-btn" id="shareCopy">üìã</button>
        </div>
    </div>

    <script>
        (function() {
            // ========== OPTIMIZED GAME STATE ==========
            let state = {
                score: 0,
                time: 30,
                gameActive: true,
                highscore: parseInt(localStorage.getItem('aaravUltimateHighscore')) || 0,
                combo: 0,
                maxCombo: 0,
                doubleActive: false,
                doubleTimeLeft: 0,
                megaActive: false,
                megaTimeLeft: 0
            };

            // DOM elements cache
            const dom = {
                score: document.getElementById('score'),
                combo: document.getElementById('combo'),
                comboFill: document.getElementById('comboFill'),
                maxCombo: document.getElementById('maxCombo'),
                highscore: document.getElementById('highscore'),
                timer: document.getElementById('timer'),
                clickBtn: document.getElementById('clickBtn'),
                themeToggle: document.getElementById('themeToggle'),
                body: document.body,
                comboCard: document.getElementById('comboCard'),
                doublePoints: document.getElementById('doublePoints'),
                timeBonus: document.getElementById('timeBonus'),
                megaClick: document.getElementById('megaClick'),
                doubleTimer: document.getElementById('doubleTimer'),
                timeTimer: document.getElementById('timeTimer'),
                megaTimer: document.getElementById('megaTimer')
            };

            // Timers
            let timers = {
                game: null,
                combo: null,
                double: null,
                mega: null
            };

            // Colors pool for explosions
            const colors = [
                'radial-gradient(circle, #fff, #ff0, #ff416c)',
                'radial-gradient(circle, #fff, #0ff, #416cff)',
                'radial-gradient(circle, #fff, #f0f, #ff6b6b)',
                'radial-gradient(circle, #fff, #0f0, #416cff)',
                'radial-gradient(circle, #fff, #ffa500, #ff416c)'
            ];

            // Audio context (lazy initialized)
            let audioContext = null;

            // Initialize highscore display
            dom.highscore.textContent = state.highscore;

            // ========== OPTIMIZED AUDIO ==========
            function playSound(type, pitch = 800) {
                try {
                    if (!audioContext) {
                        audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    }
                    
                    if (audioContext.state === 'suspended') {
                        audioContext.resume();
                        return;
                    }

                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    const now = audioContext.currentTime;
                    
                    if (type === 'click') {
                        oscillator.frequency.value = pitch;
                        gainNode.gain.setValueAtTime(0.05, now);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                        oscillator.stop(now + 0.1);
                    } else if (type === 'powerup') {
                        oscillator.frequency.setValueAtTime(600, now);
                        oscillator.frequency.exponentialRampToValueAtTime(1200, now + 0.15);
                        gainNode.gain.setValueAtTime(0.1, now);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.2);
                        oscillator.stop(now + 0.2);
                    } else if (type === 'gameOver') {
                        oscillator.frequency.setValueAtTime(200, now);
                        oscillator.frequency.exponentialRampToValueAtTime(100, now + 0.3);
                        gainNode.gain.setValueAtTime(0.1, now);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.3);
                        oscillator.stop(now + 0.3);
                    }
                    
                    oscillator.start();
                } catch (e) {}
            }

            // ========== OPTIMIZED EFFECTS ==========
            function createExplosion(x, y) {
                const explosion = document.createElement('div');
                explosion.className = 'explosion';
                explosion.style.background = colors[Math.floor(Math.random() * colors.length)];
                explosion.style.left = (x - 10) + 'px';
                explosion.style.top = (y - 10) + 'px';
                document.body.appendChild(explosion);
                
                // Use requestAnimationFrame for removal
                requestAnimationFrame(() => {
                    setTimeout(() => explosion.remove(), 400);
                });
            }

            function createFloatingText(x, y, text, color = '#ffd966') {
                const floating = document.createElement('div');
                floating.className = 'floating-text';
                floating.textContent = text;
                floating.style.color = color;
                floating.style.left = x + 'px';
                floating.style.top = y + 'px';
                document.body.appendChild(floating);
                
                requestAnimationFrame(() => {
                    setTimeout(() => floating.remove(), 600);
                });
            }

            // ========== OPTIMIZED COMBO SYSTEM ==========
            function updateCombo() {
                dom.combo.textContent = state.combo;
                const comboPercent = Math.min(100, (state.combo / 20) * 100);
                dom.comboFill.style.width = comboPercent + '%';
                
                if (state.combo >= 10) {
                    dom.comboCard.classList.add('special');
                } else {
                    dom.comboCard.classList.remove('special');
                }
            }

            function resetCombo() {
                if (state.coombo = state.combo;
                    dom.maxCombo.textContent = `üî• Max: ${state.maxCombo}`;
                }
                state.combo = 0;
                updateCombo();
            }

            // ========== GAME TIMER ==========
            function startGameTimer() {
                if (timers.game) clearInterval(timers.game);
                
                timers.game = setInterval(() => {
                    if (state.gameActive && state.time > 0) {
                        state.time--;
                        dom.timer.textContent = state.time;
                        
                        if (state.time <= 5) {
                            dom.timer.classList.add('timer-warning');
                        }
                        
                        if (state.time <= 0) {
                            endGame();
                        }
                    }
                }, 1000);
            }

            // ========== POWER-UP FUNCTIONS ==========
            function activateDouble() {
                if (!state.gameActive || state.doubleActive) return;
                
                state.doubleActive = true;
                state.doubleTimeLeft = 5;
                dom.doublePoints.classList.add('active');
                playSound('powerup');
                
                if (timers.double) clearInterval(timers.double);
                
                timers.double = setInterval(() => {
                    state.doubleTimeLeft--;
                    dom.doubleTimer.textContent = state.doubleTimeLeft + 's';
                    
                    if (state.doubleTimeLeft <= 0) {
                        state.doubleActive = false;
                        dom.doublePoints.classList.remove('active');
                        dom.doubleTimer.textContent = '';
                        clearInterval(timers.double);
                    }
                }, 1000);
            }

            function activateTimeBonus() {
                if (!state.gameActive) return;
                
                state.time += 3;
                dom.timer.textContent = state.time;
                playSound('powerup');
                
                const rect = dom.clickBtn.getBoundingClientRect();
                createFloatingText(rect.left + rect.width/2, rect.top, '+3s', '#00ff00');
                
                dom.timeBonus.classList.add('active');
                setTimeout(() => dom.timeBonus.classList.remove('active'), 200);
            }

            function activateMega() {
                if (!state.gameActive || state.megaActive) return;
                
                state.megaActive = true;
                state.megaTimeLeft = 5;
                dom.megaClick.classList.add('active');
                dom.clickBtn.classList.add('powered');
                playSound('powerup');
                
                if (timers.mega) clearInterval(timers.mega);
                
                timers.mega = setInterval(() => {
                    state.megaTimeLeft--;
                    dom.megaTimer.textContent = state.megaTimeLeft + 's';
                    
                    if (state.megaTimeLeft <= 0) {
                        state.megaActive = false;
                        dom.megaClick.classList.remove('active');
                        dom.clickBtn.classList.remove('powered');
                        dom.megaTimer.textContent = '';
                        clearInterval(timers.mega);
                    }
                }, 1000);
            }

            // ========== CLICK HANDLER ==========
            function handleClick(e) {
                if (!state.gameActive) return;

                // Get click coordinates
                const x = e.clientX || (e.touches && e.touches[0].clientX);
                const y = e.clientY || (e.touches && e.touches[0].clientY);
                
                // Calculate points
                let points = state.megaActive ? 5 : 1;
                if (state.doubleActive) points *= 2;
                
                // Add combo multiplier (max 5x)
                const comboMultiplier = Math.min(5, 1 + Math.floor(state.combo / 5));
                points *= comboMultiplier;
                
                // Update score
                state.score += points;
                dom.score.textContent = state.score;
                
                // Update combo
                state.combo++;
                if (timers.combo) clearTimeout(timers.combo);
                timers.combo = setTimeout(() => resetCombo(), 2000);
                updateCombo();
                
                // Visual effects
                if (x && y) {
                    createExplosion(x, y);
                    createFloatingText(x, y - 20, `+${points}`, points > 10 ? '#ff0' : '#ffd966');
                }
                
                // Haptic feedback (if supported)
                if (window.navigator && window.navigator.vibrate) {
                    window.navigator.vibrate(10);
                }
                
                // Sound with dynamic pitch based on combo
                playSound('click', 600 + (state.combo * 20));
            }

            // ========== GAME OVER ==========
            function endGame() {
                state.gameActive = false;
                clearInterval(timers.game);
                
                if (state.score > state.highscore) {
                    state.highscore = state.score;
                    localStorage.setItem('aaravUltimateHighscore', state.highscore);
                    dom.highscore.textContent = state.highscore;
                }
                
                playSound('gameOver');
                
                // Show game over popup
                const overlay = document.createElement('div');
                overlay.className = 'overlay';
                
                const popup = document.createElement('div');
                popup.className = 'game-over-popup';
                popup.innerHTML = `
                    <h2 style="font-size: 3rem; margin-bottom: 1rem;">üéÆ</h2>
                    <h3 style="font-size: 2rem;">GAME OVER!</h3>
                    <p style="font-size: 1.5rem; margin: 1rem 0;">Score: ${state.score}</p>
                    <p style="font-size: 1.2rem; margin-bottom: 1rem;">Max Combo: ${state.maxCombo}</p>
                    <button class="restart-btn" id="restartBtn">PLAY AGAIN</button>
                `;
                
                document.body.appendChild(overlay);
                document.body.appendChild(popup);
                
                document.getElementById('restartBtn').addEventListener('click', () => {
                    overlay.remove();
                    popup.remove();
                    resetGame();
                });
            }

            // ========== RESET GAME ==========
            function resetGame() {
                state = {
                    ...state,
                    score: 0,
                    time: 30,
                    gameActive: true,
                    combo: 0,
                    maxCombo: 0,
                    doubleActive: false,
                    doubleTimeLeft: 0,
                    megaActive: false,
                    megaTimeLeft: 0
                };
                
                // Clear all timers
                Object.values(timers).forEach(timer => {
                    if (timer) clearInterval(timer);
                });
                
                // Update UI
                dom.score.textContent = '0';
                dom.combo.textContent = '0';
                dom.comboFill.style.width = '0%';
                dom.maxCombo.textContent = 'üî• Max: 0';
                dom.timer.textContent = '30';
                dom.timer.classList.remove('timer-warning');
                dom.comboCard.classList.remove('special');
                
                // Reset power-ups
                dom.doublePoints.classList.remove('active');
                dom.megaClick.classList.remove('active');
                dom.clickBtn.classList.remove('powered');
                dom.doubleTimer.textContent = '';
                dom.megaTimer.textContent = '';
                
                // Start game
                startGameTimer();
            }

            // ========== THEME TOGGLE ==========
            dom.themeToggle.addEventListener('click', () => {
                if (dom.body.classList.contains('dark')) {
                    dom.body.classList.remove('dark');
                    dom.body.classList.add('light');
                    dom.themeToggle.textContent = '‚òÄÔ∏è';
                } else {
                    dom.body.classList.remove('light');
                    dom.body.classList.add('dark');
                    dom.themeToggle.textContent = 'üåô';
                }
            });

            // ========== SHARE FUNCTIONS ==========
            document.getElementById('shareScore').addEventListener('click', () => {
                const text = `I scored ${state.score} points with ${state.maxCombo} max combo in Aarav's Ultimate Clicker! Can you beat me? üéÆ`;
                if (navigator.share) {
                    navigator.share({ title: 'Aarav Clicker', text });
                } else {
                    navigator.clipboard.writeText(text).then(() => {
                        alert('Score copied to clipboard!');
                    });
                }
            });

            document.getElementById('shareTwitter').addEventListener('click', () => {
                const text = `I scored ${state.score} points in Aarav's Ultimate Clicker! üéÆ`;
                window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`, '_blank');
            });

            document.getElementById('shareCopy').addEventListener('click', () => {
                const text = `I scored ${state.score} points with ${state.maxCombo} max combo in Aarav's Ultimate Clicker!`;
                navigator.clipboard.writeText(text).then(() => {
                    createFloatingText(window.innerWidth/2, window.innerHeight/2, 'üìã Copied!', '#00ff00');
                });
            });

            // ========== EVENT LISTENERS ==========
            dom.clickBtn.addEventListener('click', handleClick);
            dom.clickBtn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                handleClick(e);
            });

            dom.doublePoints.addEventListener('click', activateDouble);
            dom.timeBonus.addEventListener('click', activateTimeBonus);
            dom.megaClick.addEventListener('click', activateMega);

            // Touch prevention for power-ups
            [dom.doublePoints, dom.timeBonus, dom.megaClick].forEach(el => {
                el.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    el.click();
                });
            });

            // Initialize audio context on first interaction
            document.addEventListener('touchstart', () => {
                if (audioContext && audioContext.state === 'suspended') {
                    audioContext.resume();
                }
            }, { once: true });

            document.addEventListener('click', () => {
                if (audioContext && audioContext.state === 'suspended') {
                    audioContext.resume();
                }
            }, { once: true });

            // Start the game
            startGameTimer();
        })();
    </script>
</body>
</html>
